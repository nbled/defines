<!DOCTYPE html>
<html>
	<head>
		<title> Linux Constants </title>
		<meta charset="utf-8" />

		<link rel="stylesheet" type="text/css" href="style.css" />
		<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hack-font@3/build/web/hack.css" />
	
		<script src="https://code.jquery.com/jquery-3.3.1.min.js"> </script>
		<script src="api.js" type="text/javascript"> </script>	
	</head>

	<body>
		<div id="search">
			<p> Keyword: <input type="text" id="keyword" /> </p>
		</div>
		<br/>

		<table id="constants">
			<thead>
				<tr>
					<th> Constant </th>
					<th> Value </th>
					<th> Reference </th>
				</tr>
			</thead>

			<tbody>

			</tbody>
		</table>

		<script type="text/javascript">
			function refresh(data) {
				$("#constants tbody tr").remove();

				let table = document.getElementById("constants").getElementsByTagName("tbody")[0];

				let counter = 0;
				for (let key in data) {
					let row = table.insertRow(table.rows.length);
					let n_cell = row.insertCell(0);
					let v_cell = row.insertCell(1);
					let r_cell = row.insertCell(2);
				
					n_cell.innerHTML = key;
					v_cell.innerHTML = "0x" + data[key].value.toString(16);
					r_cell.innerHTML = data[key].reference.file;

					counter += 1;
					if (counter >= 50) {
						break;
					}
				}
			}

			let api = new API("database/constants.json");
			api.load();

			refresh(api.constants);

			$("#keyword").keyup(function () {
				let keyword = $("#keyword").val().toUpperCase();
				console.log(keyword);
				refresh(api.search_by_keyword(keyword));
			});
		</script>
	</body>
</html>
